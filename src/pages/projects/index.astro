---
import BaseLayout from "../../layouts/BaseLayout.astro";
import SiteHeader from "../../components/SiteHeader.astro";
import SiteFooter from "../../components/SiteFooter.astro";
import SectionHeader from "../../components/SectionHeader.astro";
import ContentCard from "../../components/ContentCard.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects")).sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime()
);
---

<BaseLayout title="Projects">
  <SiteHeader />
  <main class="container section">
    <SectionHeader
      kicker="Build"
      title="Projects"
      description="Product, research, and experimental builds."
    />
    <div class="grid grid-3">
      {projects.map((entry) => (
        <ContentCard
          href={`/projects/${entry.slug}`}
          title={entry.data.title}
          description={entry.data.description}
          meta={entry.data.role}
          image={entry.data.coverImage}
          tags={entry.data.stack}
        />
      ))}
    </div>
  </main>
  <SiteFooter />
</BaseLayout>
